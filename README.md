# DeA Widget

Flutter-приложение с Android виджетом для отображения фраз.

## Структура проекта

```
DeA_Widget/
├── dea_widget/          # Flutter приложение
│   ├── lib/
│   │   ├── services/    # Сервисы для работы с API и виджетом
│   │   └── widgets/     # UI компоненты
│   ├── assets/
│   │   └── phrases.json # Локальные фразы
│   └── android/         # Android виджет
├── server.py            # Flask API сервер
└── requirements.txt     # Зависимости Python
```

## Запуск проекта

### 1. Запуск API сервера

```bash
# Установка зависимостей Python
pip install -r requirements.txt

# Запуск сервера
python server.py
```

Сервер будет доступен по адресу: http://localhost:5000/get_phrase

### 2. Запуск Flutter приложения

```bash
cd dea_widget

# Установка зависимостей Flutter
flutter pub get

# Запуск приложения
flutter run
```

## Функциональность

### API сервер
- **GET /get_phrase** - возвращает случайную фразу в формате JSON
- **GET /health** - проверка работоспособности сервера

### Flutter приложение
- Главный экран с информацией о виджете
- Кнопка для ручного обновления виджета
- Отображение текущей фразы

### Android виджет
- Отображает фразу на рабочем столе
- Обновляется автоматически каждые 30 минут
- Обновляется при нажатии на виджет
- Работает без интернета (использует локальные фразы)

## Логика получения фраз

1. **Приоритет API**: Сначала пытается получить фразу с http://localhost:5000/get_phrase
2. **Fallback**: Если API недоступен, использует локальный файл phrases.json
3. **Локальные фразы**: Выбираются на основе:
   - Времени суток (утро/день/вечер/ночь)
   - Дня недели (понедельник-воскресенье)

## Технологии

- **Flutter 3.22+** - основное приложение
- **Android Widget** - нативный виджет
- **Flask** - API сервер
- **HTTP** - сетевые запросы 